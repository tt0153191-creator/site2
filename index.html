<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ë–∏—Ä–∂–∞ –¢—Ä—É–¥–∞</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg-color: #0f1012;
            --card-bg: #1a1b1e;
            --text-color: #ffffff;
            --accent-green: #4caf50;
            --accent-yellow: #f1c40f;
            --accent-orange: #e67e22;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0; padding: 15px;
            display: flex; flex-direction: column; align-items: center;
            user-select: none;
        }

        .header { width: 100%; max-width: 400px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .balance-badge { background: #1c2e2a; color: #4db6ac; padding: 8px 15px; border-radius: 20px; font-weight: bold; border: 1px solid #264d47; }

        .task-card {
            background: var(--card-bg); width: 100%; max-width: 370px;
            border-radius: 20px; padding: 15px; margin-bottom: 12px;
            display: flex; align-items: center; position: relative; box-sizing: border-box;
        }
        
        .task-img {
            width: 60px; height: 60px; border-radius: 15px;
            margin-right: 15px; object-fit: cover; flex-shrink: 0;
            background: #2a2c31;
        }

        .task-info { flex-grow: 1; margin-right: 70px; }
        .task-name { font-weight: bold; font-size: 13px; display: block; margin-bottom: 4px; }
        .task-reward { position: absolute; top: 15px; right: 15px; color: var(--accent-green); font-weight: bold; }
        
        .btn-action {
            position: absolute; bottom: 15px; right: 15px;
            background: var(--accent-yellow); color: #000;
            border: none; padding: 8px 15px; border-radius: 12px;
            font-weight: bold; text-decoration: none; font-size: 11px;
            cursor: pointer;
        }

        /* –ú–æ–¥–∞–ª–∫–∏ */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); z-index: 1000; justify-content: center; align-items: center;
        }
        .modal-content {
            background: #25262b; padding: 25px; border-radius: 25px; width: 85%; max-width: 300px; text-align: center;
        }
        input, select {
            width: 100%; padding: 12px; margin: 10px 0; border-radius: 12px; border: 1px solid #444;
            background: #1a1b1e; color: white; box-sizing: border-box; font-size: 16px; outline: none;
        }
        .btn-modal {
            background: var(--accent-green); color: white; border: none; padding: 12px;
            border-radius: 12px; width: 100%; font-weight: bold; cursor: pointer;
        }
        .ref-link-box {
            background: #111; padding: 10px; border-radius: 10px; word-break: break-all;
            font-size: 11px; color: var(--accent-yellow); margin: 15px 0; border: 1px dashed #444;
        }
    </style>
</head>
<body>

    <div class="header">
        <div><span style="color: #888; font-size: 12px;">–ë–∏—Ä–∂–∞ –¢—Ä—É–¥–∞</span><br><b id="user-greeting">–ü—Ä–∏–≤–µ—Ç, üëã</b></div>
        <div class="balance-badge">üí≥ <span id="user-balance">350</span> ‚ÇΩ</div>
    </div>

    <div style="display:flex; gap:10px; width:100%; max-width:400px; margin-bottom:20px;">
        <button style="flex:1; background:#1b3d2b; color:#4caf50; padding:12px; border-radius:25px; border:none; font-weight:600;" onclick="openM('m_sum')">–í—ã–≤–æ–¥ –¥–µ–Ω–µ–≥</button>
        <button style="flex:1; background:#f1c40f; color:#000; padding:12px; border-radius:25px; border:none; font-weight:600;">–ó–∞–¥–∞–Ω–∏—è</button>
    </div>

    <div class="task-card">
        <img src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=200" class="task-img">
        <div class="task-info"><span class="task-name">–ó–∞—è–≤–∫–∞ –≤ –∫–∞–Ω–∞–ª</span></div>
        <span class="task-reward">150 ‚ÇΩ</span>
        <a href="https://t.me/+Fb-4KiMEUWUyZTk6" class="btn-action">–í–´–ü–û–õ–ù–ò–¢–¨</a>
    </div>

    <div class="task-card">
        <img src="https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=200" class="task-img">
        <div class="task-info"><span class="task-name">–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª</span></div>
        <span class="task-reward">200 ‚ÇΩ</span>
        <a href="https://t.me/belkaaassx" class="btn-action">–í–´–ü–û–õ–ù–ò–¢–¨</a>
    </div>

    <div class="task-card">
        <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=200" class="task-img">
        <div class="task-info"><span class="task-name">–°—Ç–∞—Ä—Ç –≤ –±–æ—Ç–µ 1</span></div>
        <span class="task-reward">300 ‚ÇΩ</span>
        <a href="https://t.me/avoVPN_bot?start=2ba7cfee1176aa015628b583ec82be" class="btn-action">–í–´–ü–û–õ–ù–ò–¢–¨</a>
    </div>

    <div class="task-card">
        <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=200" class="task-img">
        <div class="task-info"><span class="task-name">–°—Ç–∞—Ä—Ç –≤ –±–æ—Ç–µ 2</span></div>
        <span class="task-reward">300 ‚ÇΩ</span>
        <a href="https://t.me/Adrenaline_VPN_bot?start=referral_7861794182" class="btn-action">–í–´–ü–û–õ–ù–ò–¢–¨</a>
    </div>

    <div class="task-card">
        <img src="https://images.unsplash.com/photo-1517486808906-6ca8b3f04846?w=200" class="task-img">
        <div class="task-info">
            <span class="task-name">–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å 10 –¥—Ä—É–∑–µ–π</span>
            <div style="font-size:10px; color:#888;">–ü—Ä–æ–≥—Ä–µ—Å—Å: 0/10</div>
        </div>
        <span class="task-reward">2 200 ‚ÇΩ</span>
        <button class="btn-action" onclick="openRef()">–í–´–ü–û–õ–ù–ò–¢–¨</button>
    </div>

    <div class="task-card">
        <img src="https://images.unsplash.com/photo-1529156069898-49953e39b3ac?w=200" class="task-img">
        <div class="task-info">
            <span class="task-name">–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å 20 –¥—Ä—É–∑–µ–π</span>
            <div style="font-size:10px; color:#888;">–ü—Ä–æ–≥—Ä–µ—Å—Å: 0/20</div>
        </div>
        <span class="task-reward">2 900 ‚ÇΩ</span>
        <button class="btn-action" onclick="openRef()">–í–´–ü–û–õ–ù–ò–¢–¨</button>
    </div>

    <div id="m_sum" class="modal">
        <div class="modal-content">
            <h3>–°—É–º–º–∞ –≤—ã–≤–æ–¥–∞</h3>
            <input type="number" id="inp_sum" placeholder="–ú–∏–Ω. 100 ‚ÇΩ">
            <button class="btn-modal" onclick="toStep2()">–î–∞–ª–µ–µ</button>
            <p onclick="closeM('m_sum')" style="color:#666; cursor:pointer; font-size:12px; margin-top:10px;">–û—Ç–º–µ–Ω–∞</p>
        </div>
    </div>

    <div id="m_det" class="modal">
        <div class="modal-content">
            <h3>–†–µ–∫–≤–∏–∑–∏—Ç—ã</h3>
            <select id="inp_bank"><option>–°–±–µ—Ä–±–∞–Ω–∫</option><option>–¢-–ë–∞–Ω–∫</option><option>–ê–ª—å—Ñ–∞ –ë–∞–Ω–∫</option></select>
            <input type="tel" id="inp_phone" placeholder="–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞">
            <button class="btn-modal" onclick="finalizeWithdraw()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
            <p onclick="closeM('m_det')" style="color:#666; cursor:pointer; font-size:12px; margin-top:10px;">–ù–∞–∑–∞–¥</p>
        </div>
    </div>

    <div id="m_ref" class="modal">
        <div class="modal-content">
            <h3 style="margin-top:0">–†–µ—Ñ–µ—Ä–∞–ª—ã</h3>
            <p style="font-size:12px; color:#ccc;">–¢–≤–æ—è —Å—Å—ã–ª–∫–∞ –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è:</p>
            <div class="ref-link-box" id="ref-link-text">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            <button class="btn-modal" onclick="copyRef()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
            <p onclick="closeM('m_ref')" style="color:#666; cursor:pointer; font-size:12px; margin-top:15px;">–ó–∞–∫—Ä—ã—Ç—å</p>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();

        const BOT_TOKEN = '8509202224:AAHYTOThypQL88Uaa2KMDuhBj39yOS9dtEQ';
        const ADMIN_ID = '7861794182'; 
        const BOT_USERNAME = 'sfgdgdf_bot'; // –ò—Å–ø–æ–ª—å–∑—É–µ–º —é–∑–µ—Ä–Ω–µ–π–º —Ç–≤–æ–µ–≥–æ –±–æ—Ç–∞

        let balance = 350;
        let withdrawVal = 0;

        // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ –∏–º–µ–Ω–∏ –∏–∑ –¢–ì
        if(tg.initDataUnsafe.user) {
            document.getElementById('user-greeting').innerText = `–ü—Ä–∏–≤–µ—Ç, ${tg.initDataUnsafe.user.first_name} üëã`;
        }

        function openM(id) { document.getElementById(id).style.display = 'flex'; }
        function closeM(id) { document.getElementById(id).style.display = 'none'; }

        function openRef() {
            const uid = tg.initDataUnsafe.user ? tg.initDataUnsafe.user.id : "000";
            document.getElementById('ref-link-text').innerText = `https://t.me/${BOT_USERNAME}?start=${uid}`;
            openM('m_ref');
        }

        function copyRef() {
            const text = document.getElementById('ref-link-text').innerText;
            navigator.clipboard.writeText(text);
            alert("–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!");
        }

        function toStep2() {
            withdrawVal = document.getElementById('inp_sum').value;
            if(withdrawVal < 100) return alert("–ú–∏–Ω–∏–º—É–º 100‚ÇΩ");
            if(withdrawVal > balance) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!");
            closeM('m_sum'); openM('m_det');
        }

        async function finalizeWithdraw() {
            const bank = document.getElementById('inp_bank').value;
            const phone = document.getElementById('inp_phone').value;
            if(!phone) return alert("–í–≤–µ–¥–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω!");

            const msg = `üí∞ –í–´–í–û–î\n–°—É–º–º–∞: ${withdrawVal}‚ÇΩ\n–ë–∞–Ω–∫: ${bank}\n–¢–µ–ª: ${phone}`;

            try {
                const res = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({chat_id: ADMIN_ID, text: msg})
                });

                if(res.ok) {
                    balance -= withdrawVal;
                    document.getElementById('user-balance').innerText = balance;
                    alert("–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞, –±–∞–ª–∞–Ω—Å —Å–ø–∏—Å–∞–Ω!");
                    closeM('m_det');
                }
            } catch(e) { alert("–û—à–∏–±–∫–∞!"); }
        }
    </script>
</body>
</html>